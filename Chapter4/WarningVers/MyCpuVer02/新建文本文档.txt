老版编写方式，尽量与书上源码相似，但出现时序不对的问题。